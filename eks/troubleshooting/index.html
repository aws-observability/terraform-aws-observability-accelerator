
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
        <meta name="author" content="AWS">
      
      
        <link rel="canonical" href="https://aws-observability.github.io/terraform-aws-observability-accelerator/eks/troubleshooting/">
      
      
        <link rel="prev" href="../istio/">
      
      
        <link rel="next" href="../destroy/">
      
      
      <link rel="icon" href="../../images/aws-favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.5.46">
    
    
      
        <title>Troubleshooting - AWS Observability Accelerator for Terraform</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.6f8fc17f.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=ember:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"ember";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    

<script>
    (function(n,i,v,r,s,c,x,z){x=window.AwsRumClient={q:[],n:n,i:i,v:v,r:r,c:c};window[n]=function(c,p){x.q.push({c:c,p:p});};z=document.createElement('script');z.async=true;z.src=s;document.head.insertBefore(z,document.head.getElementsByTagName('script')[0]);})(
      'cwr',
      '1244d427-de32-4423-b7fe-3d6903e95178',
      '1.0.0',
      'us-east-2',
      'https://client.rum.us-east-1.amazonaws.com/1.12.0/cwr.js',
      {
        sessionSampleRate: 1,
        guestRoleArn: "arn:aws:iam::147084596884:role/RUM-Monitor-us-east-2-147084596884-2189797490761-Unauth",
        identityPoolId: "us-east-2:4aa2665a-6b7f-4202-856c-333e1f4bdec6",
        endpoint: "https://dataplane.rum.us-east-2.amazonaws.com",
        telemetries: ["performance","errors","http"],
        allowCookies: true,
        enableXRay: false
      }
    );
  </script>

  
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="grey">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#troubleshooting-guide-for-amazon-eks-monitoring-module" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow md-header--lifted" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../.." title="AWS Observability Accelerator for Terraform" class="md-header__button md-logo" aria-label="AWS Observability Accelerator for Terraform" data-md-component="logo">
      
  <img src="../../images/aws-logo.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            AWS Observability Accelerator for Terraform
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Troubleshooting
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/aws-observability/terraform-aws-observability-accelerator" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    aws-observability/terraform-aws-observability-accelerator
  </div>
</a>
      </div>
    
  </nav>
  
    
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="AWS Observability Accelerator for Terraform" class="md-nav__button md-logo" aria-label="AWS Observability Accelerator for Terraform" data-md-component="logo">
      
  <img src="../../images/aws-logo.png" alt="logo">

    </a>
    AWS Observability Accelerator for Terraform
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/aws-observability/terraform-aws-observability-accelerator" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 496 512"><!--! Font Awesome Free 6.7.1 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2024 Fonticons, Inc.--><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6m-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3m44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9M244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8M97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1m-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7m32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1m-11.4-14.7c-1.6 1-1.6 3.6 0 5.9s4.3 3.3 5.6 2.3c1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2"/></svg>
  </div>
  <div class="md-source__repository">
    aws-observability/terraform-aws-observability-accelerator
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Concepts
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" checked>
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Amazon EKS
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            Amazon EKS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Infrastructure
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../eks-apiserver/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EKS API server
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../gpu-monitoring/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EKS GPU montitoring
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_4" >
        
          
          <label class="md-nav__link" for="__nav_3_4" id="__nav_3_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Multicluster
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_4">
            <span class="md-nav__icon md-icon"></span>
            Multicluster
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multicluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Single AWS account
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../multiaccount/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cross AWS account
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../logs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Viewing logs
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../tracing/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tracing
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3_7" >
        
          
          <label class="md-nav__link" for="__nav_3_7" id="__nav_3_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Patterns
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_3_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3_7">
            <span class="md-nav__icon md-icon"></span>
            Patterns
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../java/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Java/JMX
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nginx/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Nginx
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../istio/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Istio
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  <span class="md-ellipsis">
    Troubleshooting
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cluster-authentication-issue" class="md-nav__link">
    <span class="md-ellipsis">
      Cluster authentication issue
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cluster authentication issue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#error-message" class="md-nav__link">
    <span class="md-ellipsis">
      Error message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resolution" class="md-nav__link">
    <span class="md-ellipsis">
      Resolution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#missing-grafana-dashboards" class="md-nav__link">
    <span class="md-ellipsis">
      Missing Grafana dashboards
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Missing Grafana dashboards">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wrong-grafana-workspace" class="md-nav__link">
    <span class="md-ellipsis">
      Wrong Grafana workspace
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grafana-api-key-expired" class="md-nav__link">
    <span class="md-ellipsis">
      Grafana API key expired
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-repository-errors" class="md-nav__link">
    <span class="md-ellipsis">
      Git repository errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flux-kustomizations" class="md-nav__link">
    <span class="md-ellipsis">
      Flux Kustomizations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grafana-dashboards-errors" class="md-nav__link">
    <span class="md-ellipsis">
      Grafana dashboards errors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrade-from-to-v25-or-earlier" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade from to v2.5 or earlier
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../destroy/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Teardown
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    AWS Distro for OpenTelemetry (ADOT)
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            AWS Distro for OpenTelemetry (ADOT)
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../adothealth/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitoring ADOT collector health
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    CloudWatch Container Insights & CloudWatch Application Signals
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            CloudWatch Container Insights & CloudWatch Application Signals
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../container-insights/eks/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Amazon EKS
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../workloads/managed-prometheus/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Monitoring Managed Service for Prometheus Workspaces
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Amazon ECS
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            Amazon ECS
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ecs/ecs-monitoring-on-ec2/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Cluster Monitoring
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  <span class="md-ellipsis">
    Supporting Examples
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            Supporting Examples
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../helpers/new-eks-cluster/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    EKS Cluster with VPC
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../helpers/managed-grafana/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Amazon Managed Grafana setup
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../helpers/ecs-cluster-with-vpc/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    ECS Cluster with VPC
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../support/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Support & Feedback
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../contributors/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Contributors
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#cluster-authentication-issue" class="md-nav__link">
    <span class="md-ellipsis">
      Cluster authentication issue
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Cluster authentication issue">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#error-message" class="md-nav__link">
    <span class="md-ellipsis">
      Error message
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#resolution" class="md-nav__link">
    <span class="md-ellipsis">
      Resolution
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#missing-grafana-dashboards" class="md-nav__link">
    <span class="md-ellipsis">
      Missing Grafana dashboards
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Missing Grafana dashboards">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#wrong-grafana-workspace" class="md-nav__link">
    <span class="md-ellipsis">
      Wrong Grafana workspace
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grafana-api-key-expired" class="md-nav__link">
    <span class="md-ellipsis">
      Grafana API key expired
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#git-repository-errors" class="md-nav__link">
    <span class="md-ellipsis">
      Git repository errors
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#flux-kustomizations" class="md-nav__link">
    <span class="md-ellipsis">
      Flux Kustomizations
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#grafana-dashboards-errors" class="md-nav__link">
    <span class="md-ellipsis">
      Grafana dashboards errors
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#upgrade-from-to-v25-or-earlier" class="md-nav__link">
    <span class="md-ellipsis">
      Upgrade from to v2.5 or earlier
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="troubleshooting-guide-for-amazon-eks-monitoring-module">Troubleshooting guide for Amazon EKS monitoring module<a class="headerlink" href="#troubleshooting-guide-for-amazon-eks-monitoring-module" title="Permanent link">&para;</a></h1>
<p>Depending on your setup, you might face a few errors. If you encounter an error
not listed here, please open an issue in the <a href="https://github.com/aws-observability/terraform-aws-observability-accelerator/issues">issues section</a></p>
<p>These guide applies to the <a href="https://github.com/aws-observability/terraform-aws-observability-accelerator/tree/main/modules/eks-monitoring">eks-monitoring Terraform module</a></p>
<h2 id="cluster-authentication-issue">Cluster authentication issue<a class="headerlink" href="#cluster-authentication-issue" title="Permanent link">&para;</a></h2>
<h3 id="error-message">Error message<a class="headerlink" href="#error-message" title="Permanent link">&para;</a></h3>
<div class="highlight"><pre><span></span><code><span class="go">╷</span>
<span class="go">│ Error: cluster-secretstore-sm failed to create kubernetes rest client for update of resource: Get &quot;https://FINGERPRINT.gr7.us-east-1.eks.amazonaws.com/api?timeout=32s&quot;: dial tcp: lookup F867DE6CE883F9595FC8A73D84FB9F83.gr7.us-east-1.eks.amazonaws.com on 192.168.4.1:53: no such host</span>
<span class="go">│</span>
<span class="go">│   with module.eks_monitoring.module.external_secrets[0].kubectl_manifest.cluster_secretstore,</span>
<span class="go">│   on ../../modules/eks-monitoring/add-ons/external-secrets/main.tf line 59, in resource &quot;kubectl_manifest&quot; &quot;cluster_secretstore&quot;:</span>
<span class="go">│   59: resource &quot;kubectl_manifest&quot; &quot;cluster_secretstore&quot; {</span>
<span class="go">│</span>
<span class="go">╵</span>
<span class="go">╷</span>
<span class="go">│ Error: grafana-operator/external-secrets-sm failed to create kubernetes rest client for update of resource: Get &quot;https://FINGERPRINT.gr7.us-east-1.eks.amazonaws.com/api?timeout=32s&quot;: dial tcp: lookup F867DE6CE883F9595FC8A73D84FB9F83.gr7.us-east-1.eks.amazonaws.com on 192.168.4.1:53: no such host</span>
<span class="go">│</span>
<span class="go">│   with module.eks_monitoring.module.external_secrets[0].kubectl_manifest.secret,</span>
<span class="go">│   on ../../modules/eks-monitoring/add-ons/external-secrets/main.tf line 89, in resource &quot;kubectl_manifest&quot; &quot;secret&quot;:</span>
<span class="go">│   89: resource &quot;kubectl_manifest&quot; &quot;secret&quot; {</span>
</code></pre></div>
<h3 id="resolution">Resolution<a class="headerlink" href="#resolution" title="Permanent link">&para;</a></h3>
<p>To provision the <code>eks-monitoring</code> module, the environment where you are running
Terraform apply needs to be authenticated against your cluster and be your
current context. To verify, you can run a single <code>kubectl get nodes</code> command
to ensure you are using the correct Amazon EKS cluster.</p>
<p>To login agains the correct cluster, run:</p>
<div class="highlight"><pre><span></span><code><span class="go">aws eks update-kubeconfig --name &lt;cluster name&gt; --region &lt;aws region&gt;</span>
</code></pre></div>
<h2 id="missing-grafana-dashboards">Missing Grafana dashboards<a class="headerlink" href="#missing-grafana-dashboards" title="Permanent link">&para;</a></h2>
<p>Terraform apply can run without apparent errors and your Grafana workspace
won't present any dashboards. Many situations could lead to this as described
below. The best place to start would be checking the logs of <code>grafana-operator</code>,
<code>external-secrets</code> and <code>flux-system</code> pods.</p>
<h3 id="wrong-grafana-workspace">Wrong Grafana workspace<a class="headerlink" href="#wrong-grafana-workspace" title="Permanent link">&para;</a></h3>
<p>It might happen that you provide the wrong Grafana workspace. One way to verify
this is to run the following command:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>describe<span class="w"> </span>grafanas<span class="w"> </span>external-grafana<span class="w"> </span>-n<span class="w"> </span>grafana-operator
</code></pre></div>
<p>You should see an output similar to this (truncated for brevity). Validate that
you have the correct URL. If that's the case, re-running Terraform with the
correct workspace ID, API key should fix this issue.</p>
<div class="highlight"><pre><span></span><code><span class="go">...</span>
<span class="go">Spec:</span>
<span class="go">  External:</span>
<span class="go">    API Key:</span>
<span class="go">      Key:   GF_SECURITY_ADMIN_APIKEY</span>
<span class="go">      Name:  grafana-admin-credentials</span>
<span class="go">    URL:     https://g-workspaceid.grafana-workspace.eu-central-1.amazonaws.com</span>
<span class="go">Status:</span>
<span class="go">  Admin URL:  https://g-workspaceid.grafana-workspace.eu-central-1.amazonaws.com</span>
<span class="go">  Dashboards:</span>
<span class="go">    grafana-operator/apiserver-troubleshooting-grafanadashboard/V3y_Zcb7k</span>
<span class="go">    grafana-operator/apiserver-basic-grafanadashboard/R6abPf9Zz</span>
<span class="go">    grafana-operator/java-grafanadashboard/m9mHfAy7ks</span>
<span class="go">    grafana-operator/grafana-dashboards-adothealth/reshmanat</span>
<span class="go">    grafana-operator/apiserver-advanced-grafanadashboard/09ec8aa1e996d6ffcd6817bbaff4db1b</span>
<span class="go">    grafana-operator/nginx-grafanadashboard/nginx</span>
<span class="go">    grafana-operator/kubelet-grafanadashboard/3138fa155d5915769fbded898ac09fd9</span>
<span class="go">    grafana-operator/cluster-grafanadashboard/efa86fd1d0c121a26444b636a3f509a8</span>
<span class="go">    grafana-operator/workloads-grafanadashboard/a164a7f0339f99e89cea5cb47e9be617</span>
<span class="go">    grafana-operator/grafana-dashboards-kubeproxy/632e265de029684c40b21cb76bca4f94</span>
<span class="go">    grafana-operator/nodes-grafanadashboard/200ac8fdbfbb74b39aff88118e4d1c2c</span>
<span class="go">    grafana-operator/node-exporter-grafanadashboard/v8yDYJqnz</span>
<span class="go">    grafana-operator/namespace-workloads-grafanadashboard/a87fb0d919ec0ea5f6543124e16c42a5</span>
</code></pre></div>
<h3 id="grafana-api-key-expired">Grafana API key expired<a class="headerlink" href="#grafana-api-key-expired" title="Permanent link">&para;</a></h3>
<p>Check on the logs on your grafana operator pod using the below command :</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>grafana-operator
</code></pre></div>
<p>Output:</p>
<div class="highlight"><pre><span></span><code><span class="go">NAME                                READY   STATUS    RESTARTS   AGE</span>
<span class="go">grafana-operator-866d4446bb-nqq5c   1/1     Running   0          3h17m</span>
</code></pre></div>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>logs<span class="w"> </span>grafana-operator-866d4446bb-nqq5c<span class="w"> </span>-n<span class="w"> </span>grafana-operator
</code></pre></div>
<p>Output:</p>
<div class="highlight"><pre><span></span><code><span class="go">1.6857285045556655e+09  ERROR   error reconciling datasource    {&quot;controller&quot;: &quot;grafanadatasource&quot;, &quot;controllerGroup&quot;: &quot;grafana.integreatly.org&quot;, &quot;controllerKind&quot;: &quot;GrafanaDatasource&quot;, &quot;GrafanaDatasource&quot;: {&quot;name&quot;:&quot;grafanadatasource-sample-amp&quot;,&quot;namespace&quot;:&quot;grafana-operator&quot;}, &quot;namespace&quot;: &quot;grafana-operator&quot;, &quot;name&quot;: &quot;grafanadatasource-sample-amp&quot;, &quot;reconcileID&quot;: &quot;72cfd60c-a255-44a1-bfbd-88b0cbc4f90c&quot;, &quot;datasource&quot;: &quot;grafanadatasource-sample-amp&quot;, &quot;grafana&quot;: &quot;external-grafana&quot;, &quot;error&quot;: &quot;status: 401, body: {\&quot;message\&quot;:\&quot;Expired API key\&quot;}\n&quot;}</span>
<span class="go">github.com/grafana-operator/grafana-operator/controllers.(*GrafanaDatasourceReconciler).Reconcile</span>
</code></pre></div>
<p>If you observe, the the above <code>grafana-api-key error</code> in the logs,
your grafana API key is expired.</p>
<p>Please use the operational procedure to update your <code>grafana-api-key</code> :</p>
<ul>
<li>
<p>Create a new Grafana API key, you can use <a href="https://aws-observability.github.io/terraform-aws-observability-accelerator/eks/#6-grafana-api-key">this step</a>
and make sure the API key duration is not too short.</p>
</li>
<li>
<p>Run Terraform with the new API key. Terraform will modify the AWS SSM
Parameter used by <code>externalsecret</code>.</p>
</li>
<li>
<p>If the issue persists, you can force the synchronization by deleting the
<code>externalsecret</code> Kubernetes object.</p>
</li>
</ul>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>delete<span class="w"> </span>externalsecret/external-secrets-sm<span class="w"> </span>-n<span class="w"> </span>grafana-operator
</code></pre></div>
<h3 id="git-repository-errors">Git repository errors<a class="headerlink" href="#git-repository-errors" title="Permanent link">&para;</a></h3>
<p><a href="https://fluxcd.io/flux/components/source/gitrepositories/">Flux</a> is responsible
to regularly pull and synchronize <a href="https://github.com/aws-observability/aws-observability-accelerator">dashboards and artifacts</a>
into your EKS cluster. It might happen that its state gets corrupted.</p>
<p>You can verify those errors by using this command. You should see an error if
Flux is not able to pull correctly:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>gitrepositories<span class="w"> </span>-n<span class="w"> </span>flux-system
NAME<span class="w">                            </span>URL<span class="w">                                                                  </span>AGE<span class="w">     </span>READY<span class="w">   </span>STATUS
aws-observability-accelerator<span class="w">   </span>https://github.com/aws-observability/aws-observability-accelerator<span class="w">   </span>6d12h<span class="w">   </span>True<span class="w">    </span>stored<span class="w"> </span>artifact<span class="w"> </span><span class="k">for</span><span class="w"> </span>revision<span class="w"> </span><span class="s1">&#39;v0.2.0@sha1:c4819a990312f7c2597f529577471320e5c4ef7d&#39;</span>
</code></pre></div>
<p>Depending on the error, you can delete the repository and re-run Terraform and
force the synchronization.</p>
<div class="highlight"><pre><span></span><code>k<span class="w"> </span>delete<span class="w"> </span>gitrepositories<span class="w"> </span>aws-observability-accelerator<span class="w">  </span>-n<span class="w"> </span>flux-system
</code></pre></div>
<p>If you believe this is a bug, please open an issue <a href="https://github.com/aws-observability/terraform-aws-observability-accelerator/issues">here</a>.</p>
<h3 id="flux-kustomizations">Flux Kustomizations<a class="headerlink" href="#flux-kustomizations" title="Permanent link">&para;</a></h3>
<p>After Flux pulls the repository in the cluster state, it will apply <a href="https://fluxcd.io/flux/components/kustomize/kustomizations/">Kustomizations</a>
to create Grafana data sources, folders and dashboards.</p>
<ul>
<li>Check the kustomization objects. Here you should see the dashboards you have
enabled</li>
</ul>
<div class="highlight"><pre><span></span><code>k<span class="w"> </span>get<span class="w"> </span>kustomizations.kustomize.toolkit.fluxcd.io<span class="w"> </span>-A
NAMESPACE<span class="w">     </span>NAME<span class="w">                                </span>AGE<span class="w">   </span>READY<span class="w">   </span>STATUS
flux-system<span class="w">   </span>grafana-dashboards-adothealth<span class="w">       </span>18d<span class="w">   </span>True<span class="w">    </span>Applied<span class="w"> </span>revision:<span class="w"> </span>v0.2.0@sha1:c4819a990312f7c2597f529577471320e5c4ef7d
flux-system<span class="w">   </span>grafana-dashboards-apiserver<span class="w">        </span>18d<span class="w">   </span>True<span class="w">    </span>Applied<span class="w"> </span>revision:<span class="w"> </span>v0.2.0@sha1:c4819a990312f7c2597f529577471320e5c4ef7d
flux-system<span class="w">   </span>grafana-dashboards-infrastructure<span class="w">   </span>10d<span class="w">   </span>True<span class="w">    </span>Applied<span class="w"> </span>revision:<span class="w"> </span>v0.2.0@sha1:c4819a990312f7c2597f529577471320e5c4ef7d
flux-system<span class="w">   </span>grafana-dashboards-java<span class="w">             </span>18d<span class="w">   </span>True<span class="w">    </span>Applied<span class="w"> </span>revision:<span class="w"> </span>v0.2.0@sha1:c4819a990312f7c2597f529577471320e5c4ef7d
flux-system<span class="w">   </span>grafana-dashboards-kubeproxy<span class="w">        </span>10d<span class="w">   </span>True<span class="w">    </span>Applied<span class="w"> </span>revision:<span class="w"> </span>v0.2.0@sha1:c4819a990312f7c2597f529577471320e5c4ef7d
flux-system<span class="w">   </span>grafana-dashboards-nginx<span class="w">            </span>18d<span class="w">   </span>True<span class="w">    </span>Applied<span class="w"> </span>revision:<span class="w"> </span>v0.2.0@sha1:c4819a990312f7c2597f529577471320e5c4ef7d
</code></pre></div>
<ul>
<li>To have more infos on an error, you can view the Kustomization controller logs</li>
</ul>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>pods<span class="w"> </span>-n<span class="w"> </span>flux-system
NAME<span class="w">                                          </span>READY<span class="w">   </span>STATUS<span class="w">    </span>RESTARTS<span class="w">      </span>AGE
helm-controller-65cc46469f-nsqd5<span class="w">              </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">2</span><span class="w"> </span><span class="o">(</span>13d<span class="w"> </span>ago<span class="o">)</span><span class="w">   </span>27d
image-automation-controller-d8f7bfcb4-k2m9j<span class="w">   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">2</span><span class="w"> </span><span class="o">(</span>13d<span class="w"> </span>ago<span class="o">)</span><span class="w">   </span>27d
image-reflector-controller-68979dfd49-wh25h<span class="w">   </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">2</span><span class="w"> </span><span class="o">(</span>13d<span class="w"> </span>ago<span class="o">)</span><span class="w">   </span>27d
kustomize-controller-767677f7f5-c5xsp<span class="w">         </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">5</span><span class="w"> </span><span class="o">(</span>13d<span class="w"> </span>ago<span class="o">)</span><span class="w">   </span>63d
notification-controller-55d8c759f5-7df5l<span class="w">      </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">5</span><span class="w"> </span><span class="o">(</span>13d<span class="w"> </span>ago<span class="o">)</span><span class="w">   </span>63d
source-controller-58c66d55cd-4j6bl<span class="w">            </span><span class="m">1</span>/1<span class="w">     </span>Running<span class="w">   </span><span class="m">5</span><span class="w"> </span><span class="o">(</span>13d<span class="w"> </span>ago<span class="o">)</span><span class="w">   </span>63d
</code></pre></div>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>logs<span class="w"> </span>-f<span class="w"> </span>-n<span class="w"> </span>flux-system<span class="w"> </span>kustomize-controller-767677f7f5-c5xsp
</code></pre></div>
<p>If you believe there is a bug, please open an issue <a href="https://github.com/aws-observability/terraform-aws-observability-accelerator/issues">here</a>.</p>
<ul>
<li>Depending on the error, delete the kustomization object and re-apply Terraform</li>
</ul>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>delete<span class="w"> </span>kustomizations<span class="w"> </span>-n<span class="w"> </span>flux-system<span class="w"> </span>grafana-dashboards-apiserver
</code></pre></div>
<h3 id="grafana-dashboards-errors">Grafana dashboards errors<a class="headerlink" href="#grafana-dashboards-errors" title="Permanent link">&para;</a></h3>
<p>If all of the above seem normal, finally inspect deployed dashboards by
running this command:</p>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>get<span class="w"> </span>grafanadashboards<span class="w"> </span>-A
NAMESPACE<span class="w">          </span>NAME<span class="w">                                         </span>AGE
grafana-operator<span class="w">   </span>apiserver-advanced-grafanadashboard<span class="w">          </span>18d
grafana-operator<span class="w">   </span>apiserver-basic-grafanadashboard<span class="w">             </span>18d
grafana-operator<span class="w">   </span>apiserver-troubleshooting-grafanadashboard<span class="w">   </span>18d
grafana-operator<span class="w">   </span>cluster-grafanadashboard<span class="w">                     </span>10d
grafana-operator<span class="w">   </span>grafana-dashboards-adothealth<span class="w">                </span>18d
grafana-operator<span class="w">   </span>grafana-dashboards-kubeproxy<span class="w">                 </span>10d
grafana-operator<span class="w">   </span>java-grafanadashboard<span class="w">                        </span>18d
grafana-operator<span class="w">   </span>kubelet-grafanadashboard<span class="w">                     </span>10d
grafana-operator<span class="w">   </span>namespace-workloads-grafanadashboard<span class="w">         </span>10d
grafana-operator<span class="w">   </span>nginx-grafanadashboard<span class="w">                       </span>18d
grafana-operator<span class="w">   </span>node-exporter-grafanadashboard<span class="w">               </span>10d
grafana-operator<span class="w">   </span>nodes-grafanadashboard<span class="w">                       </span>10d
grafana-operator<span class="w">   </span>workloads-grafanadashboard<span class="w">                   </span>10d
</code></pre></div>
<ul>
<li>You can dive into the details of a dashboard by running:</li>
</ul>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>describe<span class="w"> </span>grafanadashboards<span class="w"> </span>grafana-dashboards-kubeproxy<span class="w"> </span>-n<span class="w"> </span>grafana-operator
</code></pre></div>
<ul>
<li>Depending on the error, you can delete the dashboard object. In this case,
you don't need to re-run Terraform as the Flux Kustomization will force its
recreation through the Grafana operator</li>
</ul>
<div class="highlight"><pre><span></span><code>kubectl<span class="w"> </span>describe<span class="w"> </span>grafanadashboards<span class="w"> </span>grafana-dashboards-kubeproxy<span class="w"> </span>-n<span class="w"> </span>grafana-operator
</code></pre></div>
<p>If you believe there is a bug, please open an issue <a href="https://github.com/aws-observability/terraform-aws-observability-accelerator/issues">here</a>.</p>
<h2 id="upgrade-from-to-v25-or-earlier">Upgrade from to v2.5 or earlier<a class="headerlink" href="#upgrade-from-to-v25-or-earlier" title="Permanent link">&para;</a></h2>
<p>v2.5.0 removes the dependency to the Terraform Grafana provider in the EKS
monitoring module. As Grafana Operator manages and syncs the Grafana contents,
Terraform is not required anymore in this context.</p>
<p>However, if you migrate from earlier versions, you might leave some data
orphan as the Grafana provider is dropped.
Terraform will throw an error. We have released v2.5.0-rc.1 which removes all
the Grafana resources provisioned by Terraform in the EKS context,
without removing the provider configurations.</p>
<ul>
<li>Step 1: migrate to v2.5.0-rc.1 and run apply</li>
<li>Step 2: migrate to v2.5.0 or above</li>
</ul>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
    <div class="md-copyright__highlight">
      Copyright &copy; Amazon 2022
    </div>
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    <script id="__config" type="application/json">{"base": "../..", "features": ["navigation.tabs.sticky"], "search": "../../assets/javascripts/workers/search.6ce7567c.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../assets/javascripts/bundle.83f73b43.min.js"></script>
      
    
  </body>
</html>